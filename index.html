<!DOCTYPE html>
<html>
  <head>
    <title>Hello World!</title>
  </head>
	<style>
		html, body {
			background-color: #3B3B3B;
			font-size: 8px;
		}
		#editor {
			position: absolute;
			top: 0;
			right: 0;
			left: 0;
			height: 200px;
			border-bottom: 2px solid black;
			font-size: 8px;
		}

		th {
			font-weight: bold;
		}

		tr {
			background-color: #3C3C3C;
		}

		#render-results {
			margin-top: 202px;
		}
	</style>
<script src="libs/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="libs/jquery/jquery-2.1.3.js" type="text/javascript" charset="utf-8"></script>
<script src="libs/ace/keybinding-vim.js" type="text/javascript" charset="utf-8"></script>
  <body>
		<div id="editor">
SHOW DATABASES;

USE build_api;

SHOW TABLES;

SELECT * FROM forms;

INSERT INTO STATION VALUES (13, 'Phoenix', 'AZ', 33, 112);
INSERT INTO STATION VALUES (44, 'Denver', 'CO', 40, 105);
INSERT INTO STATION VALUES (66, 'Caribou', 'ME', 47, 68);

SELECT * FROM STATION
WHERE LAT_N > 39.7;

CREATE TABLE STATS
(ID INTEGER REFERENCES STATION(ID),
MONTH INTEGER CHECK (MONTH BETWEEN 1 AND 12),
TEMP_F REAL CHECK (TEMP_F BETWEEN -80 AND 150),
RAIN_I REAL CHECK (RAIN_I BETWEEN 0 AND 100),
PRIMARY KEY (ID, MONTH));
		</div>
		<div id="render-results">React will be here!</div>
    <!--
		We are using nodejs <script>document.write(process.version)</script>
    and atom-shell <script>document.write(process.versions['atom-shell'])</script>.
		-->
		<script src="src/bundle.js" type="text/javascript" charset="utf-8"></script>
		<script>
			window.ipc = require('ipc');
			var editor = ace.edit("editor");
			editor.setTheme("ace/theme/idle_fingers");
			editor.setKeyboardHandler('ace/keyboard/vim');
			editor.getSession().setMode("ace/mode/sql");
			editor.commands.addCommand({
				name: 'ExecuteSelectedSQL',
				bindKey: {win: 'Ctrl-w',  mac: 'Command-w'},
				exec: function(editor) {
					window.ipc.send('execute-query', getSelectedQuery());
				},
				readOnly: true // false if this command should not apply in readOnly mode
			});

			function getSelectedQuery() {
				var ret = editor.session.getTextRange(editor.getSelectionRange());
				if(ret.trim() === "") {
					var currline = editor.getSelectionRange().start.row;
					ret = editor.session.getLine(currline);
				}
				return ret;
			}

			window.ipc.on('execute-query-done', function(results) {
				window.results = results;
				console.log(results)
			});

		</script>
  </body>
</html>
